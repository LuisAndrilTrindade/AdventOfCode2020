import numpy as np


map = ["...............#.#.............", "##..#....................#...##", "......#..#.#.....#..#.#.##.....",
       ".........#...#..............#.#", "............#.......##.........", "...#.....#.....#...#.....#..#..",
       "..............#..##.#..#......#", ".##.....#.....#......##.#......", ".#..........###....#...##....#.",
       ".....#....#.#.......#......##..", ".#....#......#.......#........#", "..#.#.......#..##.....##.......",
       "...#.#....#.......#.......#...#", "##.##...##..#......#.#.....#..#", ".#.#.......#..#.#......#...#.#.",
       "#.......##.......#...#.........", ".....#......#.#.#.....#....##..", ".#.#........#....#..#..#.......",
       "...#....#..###.........#.....#.", "........#........#........#....", "..##..............#.....#.#..#.",
       ".#...##.............#.#........", "....#..#...........#.......#...", "..#....#.....................#.",
       "#.#..................##......##", ".#.##....#......#........#.....", ".........##.....#....#...##..#.",
       "#..........#..#.#.............#", ".........#...#.#.#.#..##..##...", "#...#.....#..#..#....#...#.....",
       "..##.....#..................#..", "#..###.....#....#.......#..#...", "...##.##..#............#......#",
       "........###.........###......#.", "#..##....#.........#.........#.", "....#.....................#....",
       "#..#..##..#..####.##..#.....##.", "..#...#.#....#....##.....#.....", "...#.#.........#.....#.#.......",
       "....#................#..#...##.", "....#..#..........#...#.#.##...", "........#..##............#....#",
       "...#......##..........#.##...#.", ".......##......................", ".......##..........#....#.#...#",
       "......###.##..##..#....#...#..#", "#.#...........##.....#........#", "..#...........#..###....#.#.#..",
       "........#...........#......##..", ".........#...##.###...###..#...", ".....#.....#..##.........##....",
       "...##..............#.....#...##", ".##....#.......###.....#.......", ".#...........##.............##.",
       "......#..#..##.##......#......#", "........###........#......#.#..", "#.#....#.....#........#......#.",
       ".##..#.........##...##....#....", ".....#.........#...##.....#....", ".............#........###....#.",
       "......#.......#.#........#.#...", "..#....#.#...#....#...#.#...##.", "#...#......##..##......#.##.###",
       "...##.#....#...#....#.........#", "...#..####.....##.#..#.#...##..", "##.#..#....##......#......##...",
       "###.........#.#..#.#.....#.....", "...#........#..##...#.#.#..#.#.", "...###..#.###.#...#............",
       "....................###........", "...........#...........#.......", "#..............#.#.........###.",
       "....................##.....#..#", "#.#.....#.......#...#..........", ".#...#......#....##...#...#....",
       ".....#.##..................###.", ".........#.#..#.#......#.......", ".......#.....##..#.##.#........",
       "..#..........#.###.....#....#..", "......#.............#.#........", "........##....#........#.......",
       "...#.............#....#.#......", "#........#..####.....#.....#.#.", ".##......##...#........#..#.#..",
       "....##....#...#...#..##...#.#..", "#.##...###..#....##.#..........", "....#.#...#.#...#..##.###...#..",
       "#.....##..#..#....#.#.....##...", ".#..#..........##.#.....##.....", ".#..#........#.#.#.#...........",
       ".#..#.....#...........#...#....", "...#......##..........##..#....", "...#..#....#.##...#..#.....###.",
       "#.#....#.....##................", "#..#......#.#.#.......#........", "......#....#.#....#..##....#..#",
       ".#.....#.#....###.##.........#.", ".###..#.....#........#.#.......", ".#...#......#..#.#......#.....#",
       "#...............####...#.....#.", ".......#..........##.#........#", "#........##....##.....###..##..",
       "#..#.....#..##.....#....#..#...", "#.....#.......##......#.#.....#", "#.##..#......##..#.............",
       "##...#.....#........##.........", "....#..##....#...#.......#.#...", "....#...#...##..#....#..#...#..",
       "..............#.#...#....###...", "...#....#..##...##..#....##....", "#.##.#..#..#......#.#.#.#...#..",
       ".......#..#..##........#......#", "##.#....#....##.#......##.#....", ".#...#..............#........#.",
       ".#.#....#.........#............", ".#..#..###.............#....#..", "#......#...#.#..##..#...#....#.",
       ".......................#...#.#.", ".............#..#...##.........", "..#.#..#....#....#........#....",
       "#......#.##..#...#.#...........", ".....#....#...........##.#..#..", "..#.#.....#..............#.#...",
       "#.......#.....#................", "#..............#...#....#...#..", "...#...##..#..#............#...",
       "......###.....................#", ".........#.......##..#....#....", "........#...#.##..#.##......#..",
       "....###..#.#...#...#..#.#...###", "##...#...##.#...#.#...#.#....#.", ".........#...#.....###.........",
       "...#........##..#.......##.....", ".#.......##.........#.....##..#", ".#..................#...#......",
       ".##..#..#.#.....#.###..........", "...#.....##..#.........#...#...", ".#......#.#.......#.#..........",
       ".........#.#...#..........#.#..", "#..........#.##..#.##....#.....", ".#.#....#.....#..##.....#...#..",
       "..#........##...##..#..#....#..", "#...........##....#..###....#..", "...........##.........####...#.",
       "..#........###...#.#.........#.", ".#...............#.##.#.#...#..", ".#.##..#.....#.#.....##..#.....",
       "...#...#..#.##.##...#.......##.", "..#...#...#......##.##.##...#..", "##....#...#...#...............#",
       "...##...........#......#..#.#..", "#.........#......#.#.##.....#..", "........#..#.........##........",
       "..#.#....###.....##..#...#.....", ".........#...#.......#.....##..", "##.....................#...##..",
       ".#.#..#......#.................", ".....###..#......#..###..#.....", "...#.....##.........#......#..#",
       "......##.....#...#........#.#..", "..#.#...#......#...#.##.##.....", "...#..........#...#.......#..##",
       ".###........#........##........", "..#.#.#..........#.#...##......", ".........#........#......###..#",
       "....##..#.........#...........#", "..####..#............##.......#", ".....##.#..##.........#...#.#..",
       "...#.........#.....#.....#.....", ".......#...#..#...##.........#.", "...#...#..#...#....#..#........",
       "#............##.##...#.........", ".#.#.....#.......####.....#....", "..............#......#.#.......",
       "..............#...........#...#", "#...#........###....#.#....#.#.", "##.#..#..#......#......#.#.#...",
       ".#..#.....#..#.#..#.#.......##.", "......##.#...#...#......#...#..", "#...........##....#.#..........",
       "....#.......###.#...#..........", ".......................#.....#.", "........#...#..#...#.#.#.#.#...",
       ".#.#...........#......##...#...", ".........................#.....", ".................#.##.#...##...",
       "...#...##.....#.....##....#.#..", "...#...#...................#...", "...#..#..#...#...#....#........",
       "#....#...#.....#...............", ".......#...........#...#.......", "....#....#.....##.......#......",
       ".......#..........##...........", ".#.#........#..##....#......#..", ".....#.......#.#.........#...#.",
       ".#..####.#.#...............#..#", ".....###..#..#..........#.#..##", "..#.......#...#.....##..#..#.#.",
       "#....#......#..................", "........#.##.#....#...........#", "....#.#....##..#.#.....##......",
       "...#..#.......#....#.....#.#.#.", "#...#......#.....#.#..........#", "....#....#...............#.....",
       "..###......................###.", ".##....#..#.......###.....#..#.", "..###............#........#.##.",
       ".#........#......#.....#..#....", "....#..##...#...#.###.......#.#", ".......#.##...........#.#..#...",
       ".....#...##....................", "....#....#...##......#.........", "..#............##....###.#...#.",
       ".#........#...............#....", "#..#.#.##.........#..##....##..", "#.#....#..#.##....##...#.#.....",
       ".....#.....##....#.#........#..", "#..#...#...#....#....#.........", "...#........#..#.#.....##......",
       "..#...#...#................##..", "#........#.#.##.......#.#...#..", "#......#..####.##.....#.#..#.#.",
       "............#..#.#....#......##", "..#.....##....#...#.#..........", "...#...#.........#...#.#.......",
       ".###..#.......##.##.....#.#.#..", "...#....#...............##.#...", "....##..#..#..#.#......##.....#",
       "#.#..............##...##...####", ".....#.##...#.#...............#", ".##.....#.........#.......#.#.#",
       "#.#..#.....#.......#.......#..#", "...#.#.....#.....#......#......", ".......#....#..#.#..........#..",
       "......#......#.##...#..........", ".....#.......###...#...#.#.....", "#..#.#.........#.....#.##....#.",
       "..#.#.........#..#..#..#.....#.", ".#..##..#..#....#......#.##..#.", "...##......###.....#.##.##.....",
       ".#.....#...#..#...#............", "##..##..#.##....#..#...........", "...#..##..#..#.............#.##",
       "...............##............#.", "..#.....##........##.#...#....#", ".#.#...#.#.#..#.#.....#....#...",
       ".#....#...............#..#.....", "....#.##..#....#......#...###..", "#................###...#.#.....",
       "...#...#......##..#.#....#.....", ".#....#....#.#...##............", "....#...##..#..#........#.##...",
       "..##.....#..#..##..............", "..#..##..#.#..##....#....#....#", "...##.............#............",
       "#....#....#.#........#.....##.#", ".....#..#.#.....####...###.....", "................#......#.......",
       ".....#.#.#.#.#....#..#........#", ".##.#...#.#.......##....#....#.", ".....#........#................",
       "..#.....#..#...#..#...........#", ".#.....#...##.....##..#.#....##", "......#.......#..#......##.#...",
       "#.#..........#.##.#........#...", "...#..#.............#..........", "#..#..#..........#..##.#.......",
       ".#..#...............####..#....", ".......#.....#......#.....#.#..", ".#...............#...#.........",
       ".#..#..........#..#.#..##..#..#", "......##..#.....#..#......###..", "..........#...#..#.......#.....",
       ".#.#.#..#.....#.##.#...#..#....", "........#.......#.....#.#......", "......#.....##.....#....##.#...",
       "...............#......#.......#", "..#.#...#.....#.#...##......#..", "#.#.........#.#...#........####",
       "#..........##..#..#........##..", ".............#..#.......##.#..#", "..#........#.#....#........#.#.",
       ".#......####..#..#.............", "............###.......#.#..#...", "#.##......##...#...#.........#.",
       "....##.#.#.#......#....#..#...#", ".#..#.#....#...#.........#.....", "#...#.....##............#...#..",
       "#.#...#..#.................#...", "............#.#..#.....#.#.#..#", "...................#....#.##...",
       ".....#...#.#....#....#.#......#", ".......##.#.#......##..........", ".#..#...##.#...#..#......#.....",
       "......#.#..#..###..##..##......", ".#.#.#.#.....#...###.....#..#..", ".#....#.....#.......#.......#..",
       "..........##.........####......", ".#.#.............#..#.#...#....", "........#........##...#.#....#.",
       "........#......................", "..#.#....#...............#...##", ".......#.#...#..#.....##......#",
       ".#...#....#..........##........", ".#.........#.#............##...", ".....#......##...#.......#..#..",
       "#.#..#.............#...#...#...", "......#.......#............#...", "...........##....#......##.....",
       ".#.#..#.....................#..", "##..##.....###..##.#...........", "...##......##....#...##.....#..",
       "#...#.##.............#.........", "......#..#.........###.#......#", "#.#.....#.....................#",
       "....#####.....##........#.#..#.", "...........##..##.###..........", "..........##.....#........#...#",
       ".......#..#......#.....##..##.#", ".....##.#........#.........#...", "......##......................#",
       ".#.......#.#.#............#..#.", ".....##.#.......#.#........#..."]


# part 1

def expand_map(map, slope_right, slope_down):
    width = len(map[0])
    height = len(map)

    factor = (int(height / width) + 1) * (int(slope_right / slope_down) + 1)

    return list(factor * row for row in map)


def calc_trees(map, slope_right, slope_down):
    trees = 0
    pos_right = 0
    pos_down = 0
    height = len(map)
    expanded_map = expand_map(map, slope_right, slope_down)

    while pos_down + slope_down < height:
        pos_right = pos_right + slope_right
        pos_down = pos_down + slope_down

        if expanded_map[pos_down][pos_right] == "#":
            trees = trees + 1

    return trees


slope_right = 3
slope_down = 1

print(calc_trees(map, slope_right, slope_down))


# part 2

slopes = [(1, 1), (3, 1), (5, 1), (7, 1), (1, 2)]
trees = []

for slope in slopes:
    trees.append(calc_trees(map, slope[0], slope[1]))

print(np.prod(trees))


